---
title: プリミティブを始めましょう
description: Qiskitランタイム推定値とサンプラーを使用
---

# プリミティブを始めましょう

このトピックではプリミティブの設定方法について説明します。 それらを構成するために使用できるオプションを探索し、プログラムでそれらを呼び出します。

<Admonition type="note">
    以下の例はすべて、Qiskit Runtime のプリミティブを使用しますが、代わりに基本プリミティブを使用することができます。 
</Admonition>

<span id="start-estimator"></span>
## 見積もりを始める

### 1.  アカウントを初期化する

QisKit Runtime `Estimator`は管理サービスなので、まずアカウントを初期化する必要があります。 次に、期待値を計算するために使用するシミュレータまたは実際のバックエンドを選択できます。

アカウントをお持ちでない場合は、format@@0(../start/install) の手順に従ってください。

```python
from qiskit_ibm_runtime import QiskitRuntimeService

service = QiskitRuntimeService()
backend = service.backend("ibm_brisbane")
```

### 2.  回路と観測可能なものを作成

前のセクションと同じように、少なくとも1つの回路と1つの回路が、'見積もり'プリミティブ'への入力として見えるようにする必要があります。

```python
import numpy as np
from qiskit.circuit.library import IQP
from qiskit.quantum_info import SparsePauliOp, random_hermitian

n_qubits = 127

mat = np.real(random_hermitian(n_qubits, seed=1234))
circuit = IQP(mat)
observable = SparsePauliOp("Z" * n_qubits)
print(f">>> Observable: {observable.paulis}")
```

### 3.  Qiskit ランタイム推定値を初期化

ここでは、Qiskit_ibm_runtime.Estimatel`の代わりに`qiskit_ibm_runtime.Estimatel\` のインスタンスを初期化し、Qiskit Runtimeの推定値の実装を使用します。 

`Estimator` を初期化する際には、先に選択したバックエンドをターゲットデバイス (またはシミュレータ) として渡す必要があります。  これは `session` パラメータ内で行うこともできます。 

```python
from qiskit_ibm_runtime import Estimator

estimator = Estimator(backend=backend)
```

### 4.  推定値を呼び出して結果を取得する

次に、`run()`メソッドを呼び出して、入力回路と観測データの期待値を計算します。

```python
job = estimator.run(circuit, observable)
print(f">>> ジョブID: {job.job_id()}")
print(f">>> ジョブステータス: {job.status()}")
```

```python
result = job.result()
print(f">>> {result}")
print(f" > Expectation value: {result.values[0]})
print(f" > Metadata: {result.metadata[0]}")
```

<span id="start-sampler"></span>
## サンプラーで始めよう

### 1.  アカウントを初期化する

QisKit Runtime `Sampler`は管理サービスなので、まずアカウントを初期化する必要があります。 次に、期待値を計算するために使用するシミュレータまたは実際のバックエンドを選択できます。

アカウントが設定されていない場合は、format@@0(../start/install) の手順に従ってください。

```python
from qiskit_ibm_runtime import QiskitRuntimeService

service = QiskitRuntimeService()
backend = service.backend("ibm_brisbane")
```

### 2.  回路を作成

前の節と同じように、`Sampler`プリミティブへの入力として少なくとも1つの回路が必要です。

```python
import numpy as np
from qiskit.circuit.library import IQP
from qiskit.quantum_info import random_hermitian

n_qubits = 127

mat = np.real(random_hermitian(n_qubits, seed=1234))
circuit = IQP(mat)
circuit.measure_all()
```

### 3.  Qiskit Runtime Samplerを初期化する

ここでは`qiskit_ibm_runtime.Sampler`のインスタンスを初期化し、Qiskit.primitives.Sampler`の代わりに`qiskit_ibm_runtime.Sampler\`の実装を使用します。 

`Sampler` を初期化するときは、先に選択したバックエンドをターゲットデバイス (またはシミュレータ) として渡す必要があります。  これは `session` パラメータ内で行うこともできます。 

```python
from qiskit_ibm_runtime import Sampler

samler = Sampler(backend=backend)
```

### 4.  サンプラーを起動して結果を取得する

`run()`メソッドを呼び出して、入力回路と量子状態の準確率分布を生成することができます。

```python
job = sampler.run(circuit)
print(f">>> ジョブID: {job.job_id()}")
print(f">>> ジョブステータス: {job.status()}")
```

```python
result = job.result()
print(f">>> {result}")
print(f" > 準確率分布: {result.quasi_dists[0]}")
print(f" > Metadata: {result.metadata[0]}")
```

## 次のステップ

<Admonition type="tip" title="Recommendations">
    - 詳細なformat@@2format@@3(primitives-examples)
    - IBM Quantum Learningの[Cost function lesson](https://learning.quantum.ibm.com/course/variational-algorithm-design/cost-functions#primitives)を介してプリミティブを練習します。
</Admonition>
