---
title: プリミティブの例
description: 原始的な使い方の実用例
---

# プリミティブの例

このセクションの例は、プリミティブを使用するいくつかの一般的な方法を示しています。 これらの例を実行する前に、format@@0(../start/install) の指示に従ってください。

<Admonition type="note">
    以下の例はすべて、Qiskit Runtime のプリミティブを使用しますが、代わりに基本プリミティブを使用することができます。 
</Admonition>

## 見積もりの例

多くのアルゴリズムに必要な量子演算子の期待値を効率的に計算し、解釈します。 分子モデリング、機械学習、および複雑な最適化問題での使用を探求します。

### 単一の実験を実行

推定値を使用して、単一の回路で観測可能なペアの期待値を決定します。

```python
import numpy as np
from qiskit.circuit.library import IQP
from qiskit.quantum_info import SparsePauliOp, random_hermitian
from qiskit_ibm_runtime import QiskitRuntimeService, Estimator

service = QiskitRuntimeService()

backend = service.get_backend("ibm_brisbane")

n_qubits = 127

mat = np.real(random_hermitian(n_qubits, seed=1234))
circuit = IQP(mat)
observable = SparsePauliOp("Z" * n_qubits)

estimator = Estimator(backend)
job = estimator.run(circuit, observable)
result = job.result()

print(f" > Observable: {observable.paulis}")
print(f" > Expectation value: {result.values}")
print(f" > Metadata: {result.metadata}")
```

### 1つのジョブで複数の実験を実行

推定値を使用して、複数の回路で観測可能なペアの期待値を決定します。

```python
import numpy as np
from qiskit.circuit.library import IQP
from qiskit.quantum_info import SparsePauliOp, random_hermitian
from qiskit_ibm_runtime import QiskitRuntimeService, Estimator


service = QiskitRuntimeService()

backend = service.get_backend("ibm_brisbane")

n_qubits = 127

rng = np.random.default_rng()
mats = [np.real(random_hermitian(n_qubits, seed=rng)) for _ in range(3)]
circuits = [IQP(mat) for mat in mats]
observables = [
    SparsePauliOp("X" * n_qubits),
    SparsePauliOp("Y" * n_qubits),
    SparsePauliOp("Z" * n_qubits),
]

estimator = Estimator(backend)
job = estimator.run(circuits, observables)
result = job.result()

print(f" > Expectation values: {result.values}")
```

### パラメータ回路を実行

Estimate を使用して、1 つのジョブで 3 つの実験を実行し、パラメータ値を使用して回路の再利用性を向上させます。

```python
import numpy as np
from qiskit.circuit.library import RealAmplitudes
from qiskit.quantum_info import SparsePauliOp
from qiskit_ibm_runtime import QiskitRuntimeService, Estimator

service = QiskitRuntimeService()

backend = service.get_backend("ibm_brisbane")

circuit = RealAmplitudes(num_qubits=127, reps=2)
# Define three sets of parameters for the circuit
rng = np.random.default_rng(1234)
parameter_values = [
    rng.uniform(-np.pi, np.pi, size=circuit.num_parameters) for _ in range(3)
]
observable = SparsePauliOp("Z" * 127)

estimator = Estimator(backend)
job = estimator.run([circuit] * 3, [observable] * 3, parameter_values)
result = job.result()

print(f" > Expectation values: {result.values}")
```

### セッションと高度なオプションを使用する

量子システムの回路性能を最適化するセッションと高度なオプションを探索します。

```python
import numpy as np
from qiskit.circuit.library import IQP
from qiskit.quantum_info import SparsePauliOp, random_hermitian
from qiskit_ibm_runtime import QiskitRuntimeService, Session, Estimator, Options

n_qubits = 127

rng = np.random.default_rng(1234)
mat = np.real(random_hermitian(n_qubits, seed=rng))
circuit = IQP(mat)
mat = np.real(random_hermitian(n_qubits, seed=rng))
another_circuit = IQP(mat)
observable = SparsePauliOp("X" * n_qubits)
another_observable = SparsePauliOp("Y" * n_qubits)

options = Options()
options.optimization_level = 2
options.resilience_level = 2

service = QiskitRuntimeService()

backend = service.get_backend("ibm_brisbane")

with Session(service=service, backend=backend) as session:
    estimator = Estimator(session=session, options=options)
    job = estimator.run(circuit, observable)
    another_job = estimator.run(another_circuit, another_observable)
    result = job.result()
    another_result = another_job.result()

# first job
print(f" > Expectation values job 1: {result.values}")

# second job
print(f" > Expectation values job 2: {another_result.values}")
```

## サンプラーの例

量子回路出力からサンプリングされた誤差緩和準確率分布全体を生成します。 GroverのやQVSMのような検索アルゴリズムや分類アルゴリズムにSamplerの機能を活用してください。

### 単一の実験を実行

サンプラーを使用して、単一の回路の準確率分布を決定します。

```python
import numpy as np
from qiskit.circuit.library import IQP
from qiskit.quantum_info import random_hermitian
from qiskit_ibm_runtime import QiskitRuntimeService, Sampler

service = QiskitRuntimeService()

backend = service.get_backend("ibm_brisbane")

n_qubits = 127

mat = np.real(random_hermitian(n_qubits, seed=1234))
circuit = IQP(mat)
circuit.measure_all()

sampler = Sampler(backend)
job = sampler.run(circuit)
result = job.result()

print(f" > Quasi-probability distribution: {result.quasi_dists}")
print(f" > Metadata: {result.metadata}")
```

### 1つのジョブで複数の実験を実行

サンプラーを使用して、1つのジョブで複数の回路の準確率分布を決定します。

```python
import numpy as np
from qiskit.circuit.library import IQP
from qiskit.quantum_info import random_hermitian
from qiskit_ibm_runtime import QiskitRuntimeService, Sampler 

service = QiskitRuntimeService()

backend = service.get_backend("ibm_brisbane")

n_qubits = 127

rng = np.random.default_rng()
mats = [np.real(random_hermitian(n_qubits, seed=rng)) for _ in range(3)]
circuits = [IQP(mat) for mat in mats]
for circuit in circuits:
    circuit.measure_all()

sampler = Sampler(backend) 
job = sampler.run(circuits) 
result = job.result() 

print(f" > Quasi-probability distribution: {result.quasi_dists}")
```

### パラメータ回路を実行

パラメータ値を活用することで、1つのジョブで3つの実験を実行し、回路の再利用性を高めます。

```python
import numpy as np
from qiskit.circuit.library import RealAmplitudes
from qiskit_ibm_runtime import QiskitRuntimeService, Sampler

service = QiskitRuntimeService()

backend = service.get_backend("ibm_brisbane")

circuit = RealAmplitudes(num_qubits=127, reps=2)
circuit.measure_all()
# Define three sets of parameters for the circuit
rng = np.random.default_rng(1234)
parameter_values = [
    rng.uniform(-np.pi, np.pi, size=circuit.num_parameters) for _ in range(3)
]

sampler = Sampler(backend) 
job = sampler.run([circuit] * 3, parameter_values) 
result = job.result() 

print(f" > Quasi-probability distribution: {result.quasi_dists}")
```

### セッションと高度なオプションを使用する

量子システムの回路性能を最適化するセッションと高度なオプションを探索します。

```python
import numpy as np
from qiskit.circuit.library import IQP
from qiskit.quantum_info import random_hermitian
from qiskit_ibm_runtime import QiskitRuntimeService, Sampler, Session, Options

n_qubits = 127

rng = np.random.default_rng(1234)
mat = np.real(random_hermitian(n_qubits, seed=rng))
circuit = IQP(mat)
circuit.measure_all()
mat = np.real(random_hermitian(n_qubits, seed=rng))
another_circuit = IQP(mat)
another_circuit.measure_all()

options = Options() 
options.optimization_level = 2 
options.resilience_level = 0 

service = QiskitRuntimeService()

backend = service.get_backend("ibm_brisbane")

with Session(service=service, backend=backend) as session: 
    sampler = Sampler(session=session, options=options) 
    job = sampler.run(circuit) 
    another_job = sampler.run(another_circuit) 
    result = job.result()
    another_result = another_job.result() 

# first job 
print(f" > Quasi-probability distribution job 1: {result.quasi_dists}") 

# second job 
print(f" > Quasi-probability distribution job 2: {another_result.quasi_dists}")
```

## 次のステップ

<Admonition type="tip" title="Recommendations">
    - [高度なランタイムオプションを指定する](advanced-runtime-options)
    - IBM Quantum Learningの[Cost function lesson](https://learning.quantum.ibm.com/course/variational-algorithm-design/cost-functions#primitives) を使用してプリミティブを練習します。
</Admonition>
